{
  "name": "SQLite MCP Server Evaluation",
  "description": "Evaluation suite for the official SQLite MCP server, demonstrating database operations with direct mode testing",
  "cases": [
    {
      "id": "should query all users",
      "description": "Direct query to get all users",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT * FROM users ORDER BY id"
      },
      "expectedTextContains": ["Alice", "Bob", "Charlie", "Diana"]
    },
    {
      "id": "should count total users",
      "description": "Count total number of users",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT COUNT(*) as count FROM users"
      },
      "expectedTextContains": "4"
    },
    {
      "id": "should list all database tables",
      "description": "List all tables in the database",
      "mode": "direct",
      "toolName": "list_tables",
      "args": {},
      "expectedTextContains": ["users", "posts"]
    },
    {
      "id": "should describe users table schema",
      "description": "Get schema for users table",
      "mode": "direct",
      "toolName": "describe_table",
      "args": {
        "table_name": "users"
      },
      "expectedTextContains": ["id", "name", "email", "role", "INTEGER", "TEXT"]
    },
    {
      "id": "should query admin users",
      "description": "Query users with admin role",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT name, role FROM users WHERE role = 'admin'"
      },
      "expectedTextContains": ["Alice", "admin"]
    },
    {
      "id": "should join users and posts tables",
      "description": "JOIN query to get posts with user names",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT u.name, p.title FROM users u JOIN posts p ON u.id = p.user_id WHERE p.published = 1"
      },
      "expectedTextContains": ["Alice", "Bob", "Charlie"]
    },
    {
      "id": "should count published posts",
      "description": "Count published posts",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT COUNT(*) as count FROM posts WHERE published = 1"
      },
      "expectedTextContains": "4"
    },
    {
      "id": "should count posts per user",
      "description": "Count posts per user",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT u.name, COUNT(p.id) as post_count FROM users u LEFT JOIN posts p ON u.id = p.user_id GROUP BY u.id ORDER BY post_count DESC"
      },
      "expectedTextContains": ["Bob", "Alice", "Charlie"]
    },
    {
      "id": "should describe posts table schema",
      "description": "Get schema for posts table",
      "mode": "direct",
      "toolName": "describe_table",
      "args": {
        "table_name": "posts"
      },
      "expectedTextContains": ["id", "user_id", "title", "published", "content"]
    },
    {
      "id": "should query only published posts",
      "description": "Query only published posts",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT title, published FROM posts WHERE published = 1 ORDER BY id"
      },
      "expectedTextContains": [
        "Getting Started",
        "Database Best Practices",
        "Performance Tuning"
      ]
    },
    {
      "id": "should find moderator users",
      "description": "Find users with moderator role",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT name, email FROM users WHERE role = 'moderator'"
      },
      "expectedTextContains": ["Bob", "bob@example.com"]
    },
    {
      "id": "should get all posts by Alice",
      "description": "Get all posts by Alice",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT title, published FROM posts WHERE user_id = 1 ORDER BY id"
      },
      "expectedTextContains": ["Getting Started", "Draft: Advanced Topics"]
    },
    {
      "id": "should calculate published vs draft ratio",
      "description": "Calculate published vs draft posts ratio",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT SUM(CASE WHEN published = 1 THEN 1 ELSE 0 END) as published, SUM(CASE WHEN published = 0 THEN 1 ELSE 0 END) as drafts FROM posts"
      },
      "expectedTextContains": ["published", "drafts"]
    },
    {
      "id": "should handle invalid SQL syntax gracefully",
      "description": "Handle invalid SQL syntax gracefully",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT * FORM users"
      },
      "expectedTextContains": "error"
    },
    {
      "id": "should handle non-existent table query",
      "description": "Query non-existent table returns empty",
      "mode": "direct",
      "toolName": "describe_table",
      "args": {
        "table_name": "nonexistent_table"
      },
      "expectedTextContains": "[]"
    },
    {
      "id": "should exactly match user count",
      "description": "Exact match validation for user count",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT COUNT(*) as count FROM users"
      },
      "expectedTextContains": ["count", "4"]
    },
    {
      "id": "should introspect database tables",
      "description": "Schema introspection - list all tables",
      "mode": "direct",
      "toolName": "list_tables",
      "args": {},
      "expectedTextContains": ["users", "posts"]
    },
    {
      "id": "should show detailed users table structure",
      "description": "Schema introspection - detailed users table structure",
      "mode": "direct",
      "toolName": "describe_table",
      "args": {
        "table_name": "users"
      },
      "expectedTextContains": [
        "id",
        "name",
        "email",
        "role",
        "created_at",
        "INTEGER",
        "TEXT"
      ]
    },
    {
      "id": "should match users list snapshot",
      "description": "Snapshot test for all users query result",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT * FROM users ORDER BY id"
      },
      "expectedSnapshot": "users-list.json",
      "snapshotSanitizers": ["timestamp"]
    },
    {
      "id": "should match posts with users snapshot",
      "description": "Snapshot test for posts with user information",
      "mode": "direct",
      "toolName": "read_query",
      "args": {
        "query": "SELECT posts.id, posts.title, users.name as author FROM posts JOIN users ON posts.user_id = users.id ORDER BY posts.id"
      },
      "expectedSnapshot": "posts-with-users.json"
    },
    {
      "id": "should match table list snapshot",
      "description": "Snapshot test for database table listing",
      "mode": "direct",
      "toolName": "list_tables",
      "args": {},
      "expectedSnapshot": "table-list.json"
    }
  ],
  "metadata": {
    "author": "MCP Eval Examples",
    "version": "1.0.0",
    "notes": [
      "This dataset tests the official SQLite MCP server from Anthropic",
      "Direct mode tests specific SQL queries with known results",
      "All databases are created in temporary directories using fixturify-project + better-sqlite3",
      "No API keys required - all tests run locally",
      "See filesystem-server example for LLM host mode testing patterns"
    ]
  }
}
